{% extends 'core/base.html' %}
{% block title %}Editar Paciente{% endblock %}
{% block content %}

<div class="container my-5">
    <h2 class="text-primary text-center">Editar Información del Paciente</h2>
    <form method="post" action="{% url 'editar_paciente' paciente.id %}">
        {% csrf_token %}

        <!-- Campos del Paciente -->
        <div class="row mb-4">
            <div class="col-md-6">
                <label for="nombre" class="form-label">Nombre:</label>
                {{ form.nombre }}
            </div>
            <div class="col-md-6">
                <label for="apellido" class="form-label">Apellido:</label>
                {{ form.apellido }}
            </div>
            <div class="col-md-6">
                <label for="rut" class="form-label">RUT:</label>
                {{ form.rut }}
            </div>
            <div class="col-md-6">
                <label for="cantidad_sesiones" class="form-label">Cantidad de Sesiones:</label>
                <input type="number" name="cantidad_sesiones" id="cantidad_sesiones" 
                       value="{{ paciente.cantidad_sesiones }}" class="form-control" min="1" required>
            </div>
        </div>

        <!-- Sesiones Dinámicas -->
        <h4 class="text-primary mt-4">Sesiones</h4>
        <div id="sesiones-container">
            {% for sesion in sesiones %}
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="fecha_{{ forloop.counter }}">Fecha Sesión {{ forloop.counter }}</label>
                    <input type="date" name="fecha_{{ forloop.counter }}" id="fecha_{{ forloop.counter }}" 
                           value="{{ sesion.fecha }}" class="form-control">
                </div>
                <div class="col-md-6">
                    <label for="hora_{{ forloop.counter }}">Hora Sesión {{ forloop.counter }}</label>
                    <input type="time" name="hora_{{ forloop.counter }}" id="hora_{{ forloop.counter }}" 
                           value="{{ sesion.hora }}" class="form-control">
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Botón para guardar -->
        <div class="d-flex justify-content-center mt-4">
            <button type="submit" class="btn btn-primary px-5 py-2">Guardar Cambios</button>
        </div>
    </form>
</div>

{% endblock %}
